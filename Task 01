import os
from google.cloud import translate_v2 as translate
from dotenv import load_dotenv

# Load environment variables
load_dotenv()

# Initialize the Google Translate client
translate_client = translate.Client()

def translate_text(text, target_language):
    """
    Translate the given text to the target language.
    """
    result = translate_client.translate(text, target_language=target_language)
    return result['translatedText']

def detect_language(text):
    """
    Detect the language of the given text.
    """
    result = translate_client.detect_language(text)
    return result['language']

def main():
    print("Welcome to the Simple Language Translator!")
    
    while True:
        text = input("Enter the text you want to translate (or 'q' to quit): ")
        if text.lower() == 'q':
            break
        
        source_language = detect_language(text)
        print(f"Detected language: {source_language}")
        
        target_language = input("Enter the target language code (e.g., 'es' for Spanish): ")
        
        translated_text = translate_text(text, target_language)
        
        print(f"\nOriginal text ({source_language}): {text}")
        print(f"Translated text ({target_language}): {translated_text}\n")

if __name__ == "__main__":
    main()